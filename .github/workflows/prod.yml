name: Deploy Application apiDemo

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: self-hosted
    steps:
      - name: Pull image from docker hub
        run: docker pull lucasalves5678/demo:latest  
      - name: Remove docker container
        run: docker rm -f apiDemo || true
      - name: Run docker container
        run: |
          docker run -d -p 8090:8080 --name testeDemo --net networkmysql \
          -e MYSQL_HOST=mysqlcontainer \
          -e MYSQL_PORT=3306 \
          -e MYSQL_DB_NAME=teste \
          -e MYSQL_USER=root \
          -e MYSQL_PASSWORD=root \
          lucasalves5678/demo:latest
